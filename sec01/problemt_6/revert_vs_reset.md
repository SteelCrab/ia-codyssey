# Reset vs Revert 차이점과 협업 시 Revert 추천 이유

## 📋 개요

Git에서 변경사항을 되돌리는 두 가지 주요 방법인 `git reset`과 `git revert`의 차이점을 설명하고, 왜 협업 환경에서 `revert`를 추천하는지 알아봅니다.

---

## 🔄 Git Reset

### 정의
`git reset`은 **현재 브랜치의 HEAD를 특정 커밋으로 이동**시키는 명령어입니다. 커밋 히스토리에서 해당 커밋 이후의 모든 커밋을 **실제로 삭제**합니다.

### 동작 방식
```bash
# 이전 상태
A ← B ← C ← D (HEAD)

# git reset --hard HEAD~2 실행 후
A ← B (HEAD)  # C, D가 완전히 삭제됨
```

### 사용법
```bash
# 마지막 커밋 1개 삭제 (작업 내용도 삭제)
git reset --hard HEAD~1

# 마지막 커밋 1개 삭제 (작업 내용은 유지)
git reset --soft HEAD~1

# 특정 커밋으로 되돌리기
git reset --hard <commit-hash>
```

### Reset 옵션별 차이

| 옵션 | 커밋 히스토리 | 스테이징 영역 | 작업 디렉토리 |
|------|-------------|-------------|-------------|
| `--soft` | 되돌림 | 유지 | 유지 |
| `--mixed` (기본) | 되돌림 | 초기화 | 유지 |
| `--hard` | 되돌림 | 초기화 | 초기화 |

### 장점
- 히스토리가 깔끔해짐
- 실수한 커밋을 완전히 제거 가능
- 빠르고 직접적인 해결

### 단점
- **히스토리가 변경됨** (위험함)
- **이미 공유된 커밋을 삭제하면 협업 문제 발생**
- **되돌리기 어려움** (삭제된 커밋 복구 복잡)

---

## ↩️ Git Revert

### 정의
`git revert`는 **특정 커밋의 변경사항을 되돌리는 새로운 커밋을 생성**하는 명령어입니다. 기존 히스토리는 그대로 보존하면서 역방향 변경사항을 적용합니다.

### 동작 방식
```bash
# 이전 상태
A ← B ← C ← D (HEAD)

# git revert C 실행 후
A ← B ← C ← D ← E (HEAD)  # E는 C를 되돌리는 새 커밋
```

### 사용법
```bash
# 마지막 커밋을 되돌리는 새 커밋 생성
git revert HEAD

# 특정 커밋을 되돌리는 새 커밋 생성
git revert <commit-hash>

# 여러 커밋을 한 번에 되돌리기
git revert HEAD~3..HEAD

# 자동 커밋 메시지 없이 실행
git revert HEAD --no-edit
```

### 장점
- **히스토리가 보존됨** (안전함)
- **협업에 안전함** (다른 개발자에게 영향 없음)
- **투명성**: 무엇을 되돌렸는지 명확히 기록됨
- **복구 가능**: 나중에 revert를 다시 revert 할 수 있음

### 단점
- 히스토리가 길어짐
- 복잡한 충돌 상황 발생 가능
- 즉시적인 해결이 아님

---

## ⚖️ 상세 비교표

| 구분 | Git Reset | Git Revert |
|------|-----------|------------|
| **히스토리 변경** | ✅ 변경함 (삭제) | ❌ 보존함 |
| **새 커밋 생성** | ❌ 안함 | ✅ 함 |
| **협업 안전성** | ❌ 위험함 | ✅ 안전함 |
| **되돌리기** | 어려움 | 쉬움 (revert의 revert) |
| **히스토리 깔끔함** | ✅ 깔끔함 | ❌ 길어짐 |
| **Force Push 필요** | ✅ 필요 (공유된 경우) | ❌ 불필요 |
| **사용 시기** | 개인 작업, 미공유 커밋 | 협업, 공유된 커밋 |

---

## 🤝 협업 시 Revert를 추천하는 이유

### 1. **히스토리 무결성 보장**
```bash
# 팀원 A가 reset 사용
git reset --hard HEAD~1
git push --force

# 팀원 B가 pull 시도
git pull  # 오류 발생: 히스토리 불일치
```

```bash
# 팀원 A가 revert 사용
git revert HEAD
git push

# 팀원 B가 pull 시도
git pull  # 정상 동작: 새 커밋만 추가됨
```

### 2. **투명한 변경 이력**
- 누가, 언제, 무엇을 되돌렸는지 명확히 기록됨
- 코드 리뷰 과정에서 변경사항을 추적 가능
- 감사(audit) 요구사항 충족

### 3. **복구 용이성**
```bash
# revert한 내용을 다시 되돌리고 싶을 때
git revert <revert-commit-hash>  # 간단하게 복구 가능
```

### 4. **충돌 최소화**
- 다른 개발자의 로컬 저장소와 히스토리 불일치 방지
- Force push 불필요 → 다른 개발자의 작업에 영향 없음

### 5. **안전한 협업 워크플로우**
```bash
# 안전한 협업 시나리오
Developer A: git revert problematic-commit
Developer A: git push origin main

Developer B: git pull  # 문제없이 동기화됨
Developer C: git pull  # 문제없이 동기화됨
```

---

## 🎯 사용 시나리오별 권장사항

### Reset을 사용해야 할 때
- **개인 로컬 작업**에서 아직 푸시하지 않은 커밋
- **실험적 브랜치**에서 히스토리를 정리할 때
- **임시 커밋들**을 깔끔하게 정리할 때

```bash
# 로컬에서만 작업한 경우
git reset --hard HEAD~3  # 안전함
```

### Revert를 사용해야 할 때
- **이미 공유된 커밋**을 되돌릴 때
- **프로덕션 환경**에 배포된 코드를 되돌릴 때
- **팀 프로젝트**에서 문제가 있는 커밋을 되돌릴 때

```bash
# 팀 협업 환경에서
git revert problematic-commit  # 안전함
git push origin main
```

